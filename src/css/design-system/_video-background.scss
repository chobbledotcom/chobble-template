@use "../variables" as *;
@use "../mixins" as *;

// =============================================================================
// VIDEO BACKGROUND
// =============================================================================
// Full-width video background with overlaid text content.
// The video plays automatically, muted, and doesn't respond to user interaction.

.design-system {
  .video-background {
    position: relative;
    width: 100%;
    overflow: hidden;
    background: $color-dark-bg;

    // The iframe covers the entire container
    > iframe {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 100%;
      height: 100%;
      min-width: 100%;
      min-height: 100%;
      transform: translate(-50%, -50%);
      object-fit: cover;
      pointer-events: none; // Disable interaction with video
      border: 0;

      // Scale up to ensure coverage without letterboxing
      @supports (aspect-ratio: 16/9) {
        width: 177.77vh; // 16:9 ratio
        height: 56.25vw;
        min-width: 100%;
        min-height: 100%;
      }
    }

    // Semi-transparent overlay for text readability
    > figure {
      position: absolute;
      inset: 0;
      @include flex-center;
      background: rgba($color-dark-bg, 0.5);
      color: var(--color-contrast-text);
      padding: $space-lg;

      // Override text colors for overlay
      --color-text: var(--color-contrast-text);
      --color-text-muted: var(--color-contrast-text-muted);
    }

    // Content container
    figcaption {
      @include container($width-default);
      text-align: center;
      max-width: 100%;

      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        color: var(--color-contrast-text);
        text-shadow: var(--shadow-sm);
      }

      p {
        color: var(--color-contrast-text-muted);
        text-shadow: var(--shadow-sm);
      }

      // Style buttons for visibility on video
      .btn,
      a.btn {
        background: var(--color-contrast-text-muted);
        color: var(--color-text, #{$color-dark-bg});
        border-color: transparent;

        &:hover {
          background: var(--color-contrast-text);
        }
      }

      .btn--primary {
        background: var(--color-link, #{$color-primary});
        color: var(--color-contrast-text);
        border-color: transparent;

        &:hover {
          background: var(--color-link-hover, #{$color-primary-dark});
        }
      }
    }

    // Light overlay variant
    &--light-overlay {
      > figure {
        background: rgba($color-white, 0.7);
        color: var(--color-text, #{$color-text});
        --color-text: #{$color-text};
        --color-text-muted: #{$color-text-muted};
      }

      figcaption {
        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
          color: var(--color-text, #{$color-text});
          text-shadow: none;
        }

        p {
          color: var(--color-text, #{$color-text});
          text-shadow: none;
        }
      }
    }

    // Minimal overlay variant (just a subtle gradient)
    &--minimal-overlay {
      > figure {
        background: linear-gradient(
          to bottom,
          rgba($color-dark-bg, 0.3) 0%,
          rgba($color-dark-bg, 0.1) 50%,
          rgba($color-dark-bg, 0.5) 100%
        );
      }
    }
  }
}
