---
layout: base
---

{{ content }}

{%- assign menus = collections.menu | sort: 'data.order' -%}
{%- if homepage.show_menus and menus.size > 0 -%}
  <hr />
  {%- render_snippet "homepage-menus-header", "<h3>Our Menus</h3>" -%}
  {% include "menus-list.html" %}
{%- endif -%}

{%- if homepage.show_news and collections.news.size > 0 -%}
  <hr />
  {%- render_snippet "homepage-news-header", "<h3>Latest Posts</h3>" -%}

  {%- assign all_have_images = true -%}
  {%- for post in collections.news -%}
    {%- unless post.data.header_image -%}
      {%- assign all_have_images = false -%}
      {%- break -%}
    {%- endunless -%}
  {%- endfor -%}

  {%- if all_have_images -%}
    {%- assign posts = collections.news | reverse | slice: 0, 2 -%}
    {%- include "slider.html", key: "homepage_news", items: posts -%}
  {%- else -%}
    {% include "news-post-list.html", limit: 2 %}
  {%- endif -%}
{%- endif -%}

{%- assign categories = collections.categories | getFeaturedCategories -%}
{%- if homepage.show_products and categories.size > 0 -%}
  <hr>
  {%- render_snippet "homepage-categories-header", "<h3>Product Categories</h3>" -%}
  {%- include "categories-list.html" -%}
{%- endif -%}

{%- assign products = collections.products | getFeaturedProducts -%}
{%- if homepage.show_featured_products and products.size > 0 -%}
  <hr>
  {%- render_snippet "homepage-products-header", "<h3>Featured Products</h3>" -%}
  {%- include "products-list.html" -%}
{%- endif -%}

{%- assign recurring_events = collections.events | where: "data.recurring_date" -%}
{%- if homepage.show_recurring_events and recurring_events.size > 0 -%}
  <hr>
  {%- render_snippet "homepage-events-header", "<h3>Regular Events</h3>" -%}
  {% include "recurring-events-list.html" %}
{%- endif -%}
