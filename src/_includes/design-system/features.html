{%- comment -%}
Features grid with list semantics.

Parameters (via block object):
  - block.items: Array of feature objects with properties:
    - icon: Icon content. Supported formats:
        - Iconify ID: "prefix:name" (e.g., "hugeicons:home-01", "hugeicons:settings-02")
        - Image path: starts with "/" (e.g., "/images/icon.svg")
        - Raw content: emoji or HTML entity (e.g., "&#128640;")
    - icon_label: Accessible label for icon (optional, defaults to decorative)
    - title: Feature title
    - description: Feature description
    - style: Optional inline styles (e.g., for custom colors)
  - block.reveal: If true, adds data-reveal animation (default: true)
  - block.heading_level: Heading level for titles, defaults to 3 (h3)
  - block.grid_class: CSS class for grid container (default: "features")
               Use "grid--4" for 4-column layout, "grid" for 3-column, etc.
  - block.header_title: Optional section header title (renders section-header before grid)
  - block.header_subtitle: Optional section header subtitle

Usage:
  {% include "design-system/features.html", block: { items: page.features } %}

  Where page.features = [
    { icon: "hugeicons:rocket", title: "Fast", description: "Static HTML" },
    { icon: "&#128640;", title: "Emoji", description: "HTML entity icon" },
    { icon: "/images/icon.svg", title: "Custom", description: "Path-based icon" },
    ...
  ]
{%- endcomment -%}

{%- assign reveal = block.reveal | default: true -%}
{%- assign heading_level = block.heading_level | default: 3 -%}
{%- assign grid_class = block.grid_class | default: "features" -%}

{%- if block.header_title -%}
  <hgroup class="section-header stack--sm text-center">
    <h2>{{ block.header_title }}</h2>
    {%- if block.header_subtitle -%}
      <p class="text-muted">{{ block.header_subtitle }}</p>
    {%- endif -%}
  </hgroup>
{%- endif -%}

<ul class="{{ grid_class }}" role="list">
  {%- for item in block.items -%}
  <li>
    <article class="feature"{% if reveal %} data-reveal{% endif %}{% if item.style %} style="{{ item.style }}"{% endif %}>
      {%- if item.icon -%}
        {%- if item.icon_label -%}
          <div class="icon" role="img" aria-label="{{ item.icon_label }}">{%- include "design-system/icon.html", icon: item.icon -%}</div>
        {%- else -%}
          <div class="icon" aria-hidden="true">{%- include "design-system/icon.html", icon: item.icon -%}</div>
        {%- endif -%}
      {%- endif -%}
      <h{{ heading_level }}>{{ item.title }}</h{{ heading_level }}>
      <p>{{ item.description }}</p>
    </article>
  </li>
  {%- endfor -%}
</ul>
