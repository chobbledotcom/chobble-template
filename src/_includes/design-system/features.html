{%- comment -%}
Features grid with list semantics.

Parameters:
  - items: Array of feature objects with properties:
    - icon: Icon content (emoji, HTML entity, or path starting with /)
    - icon_label: Accessible label for icon (optional, defaults to decorative)
    - title: Feature title
    - description: Feature description
    - style: Optional inline styles (e.g., for custom colors)
  - reveal: If true, adds data-reveal animation (default: true)
  - heading_level: Heading level for titles, defaults to 3 (h3)

Usage:
  {% include "design-system/features.html", items: page.features %}

  Where page.features = [
    { icon: "&#128640;", title: "Fast", description: "Static HTML" },
    { icon: "/images/icon.svg", title: "Custom", description: "Path-based icon" },
    ...
  ]
{%- endcomment -%}

{%- assign reveal = reveal | default: true -%}
{%- assign heading_level = heading_level | default: 3 -%}

<ul class="features" role="list">
  {%- for item in items -%}
  <li>
    <article class="feature"{% if reveal %} data-reveal{% endif %}{% if item.style %} style="{{ item.style }}"{% endif %}>
      {%- if item.icon -%}
        {%- assign icon_first_char = item.icon | slice: 0 -%}
        {%- if item.icon_label -%}
          <div class="icon" role="img" aria-label="{{ item.icon_label }}">
            {%- if icon_first_char == "/" -%}
              <img src="{{ item.icon }}" alt="">
            {%- else -%}
              {{- item.icon -}}
            {%- endif -%}
          </div>
        {%- else -%}
          <div class="icon" aria-hidden="true">
            {%- if icon_first_char == "/" -%}
              <img src="{{ item.icon }}" alt="">
            {%- else -%}
              {{- item.icon -}}
            {%- endif -%}
          </div>
        {%- endif -%}
      {%- endif -%}
      <h{{ heading_level }}>{{ item.title }}</h{{ heading_level }}>
      <p>{{ item.description }}</p>
    </article>
  </li>
  {%- endfor -%}
</ul>
