{%- comment -%}
Features grid with list semantics.

Parameters:
  - items: Array of feature objects with properties:
    - icon: Icon content. Supported formats:
        - Iconify ID: "prefix:name" (e.g., "mdi:home", "lucide:settings")
        - Image path: starts with "/" (e.g., "/images/icon.svg")
        - Raw content: emoji or HTML entity (e.g., "&#128640;")
    - icon_label: Accessible label for icon (optional, defaults to decorative)
    - title: Feature title
    - description: Feature description
    - style: Optional inline styles (e.g., for custom colors)
  - reveal: If true, adds data-reveal animation (default: true)
  - heading_level: Heading level for titles, defaults to 3 (h3)
  - grid_class: CSS class for grid container (default: "features")
               Use "grid--4" for 4-column layout, "grid" for 3-column, etc.
  - header_title: Optional section header title (renders section-header before grid)
  - header_subtitle: Optional section header subtitle

Usage:
  {% include "design-system/features.html", items: page.features %}

  Where page.features = [
    { icon: "mdi:rocket-launch", title: "Fast", description: "Static HTML" },
    { icon: "&#128640;", title: "Emoji", description: "HTML entity icon" },
    { icon: "/images/icon.svg", title: "Custom", description: "Path-based icon" },
    ...
  ]
{%- endcomment -%}

{%- if reveal == nil or reveal == "" -%}
  {%- assign reveal = true -%}
{%- endif -%}
{%- if heading_level == nil or heading_level == "" -%}
  {%- assign heading_level = 3 -%}
{%- endif -%}
{%- if grid_class == nil or grid_class == "" -%}
  {%- assign grid_class = "features" -%}
{%- endif -%}

{%- if header_title -%}
  {%- include "design-system/section-header.html",
      title: header_title,
      subtitle: header_subtitle
  -%}
{%- endif -%}

<ul class="{{ grid_class }}" role="list">
  {%- for item in items -%}
  <li>
    <article class="feature"{% if reveal %} data-reveal{% endif %}{% if item.style %} style="{{ item.style }}"{% endif %}>
      {%- if item.icon -%}
        {%- if item.icon_label -%}
          <div class="icon" role="img" aria-label="{{ item.icon_label }}">{%- include "design-system/icon.html", icon: item.icon -%}</div>
        {%- else -%}
          <div class="icon" aria-hidden="true">{%- include "design-system/icon.html", icon: item.icon -%}</div>
        {%- endif -%}
      {%- endif -%}
      <h{{ heading_level }}>{{ item.title }}</h{{ heading_level }}>
      <p>{{ item.description }}</p>
    </article>
  </li>
  {%- endfor -%}
</ul>
