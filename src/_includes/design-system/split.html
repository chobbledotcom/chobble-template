{%- comment -%}
Split layout with text content and figure (image, video, code block, or custom HTML).

Parameters (via block object):
  - block.title: Section heading
  - block.title_level: Heading level, defaults to 2
  - block.subtitle: Optional subtitle text (with text-muted styling)
  - block.content: Main content (can include HTML like <ul>, <p>)
  - block.figure_type: "image", "video", "code", or "html"
  - block.reverse: If true, reverses the layout (content on right)
  - block.reveal_content: Animation for content side (e.g., "left", "right")
  - block.reveal_figure: Animation for figure side (default: "scale")
  - block.button: Optional button object { text, href, variant }

  Figure fields per type:
    image: figure_src, figure_alt, figure_caption
    video: figure_video_id, figure_alt, figure_caption
    code:  figure_filename, figure_code, figure_language
    html:  figure_html

Usage:
  {% include "design-system/split.html",
     block: {
       title: "My Section",
       content: "<p>Description here</p>",
       figure_type: "image",
       figure_src: "/images/photo.jpg",
       figure_alt: "A photo",
       figure_caption: "Optional caption",
       reverse: true
     }
  %}
{%- endcomment -%}

{%- assign title_level = block.title_level | default: 2 -%}
{%- assign reveal_content = block.reveal_content | default: "left" -%}
{%- assign reveal_figure = block.reveal_figure | default: "scale" -%}

<div class="split{% if block.reverse %} split--reverse{% endif %}">
  <article class="stack" data-reveal="{{ reveal_content }}">
    {%- if block.title -%}
      <h{{ title_level }}>{{ block.title }}</h{{ title_level }}>
    {%- endif -%}
    {%- if block.subtitle -%}
      <p class="text-muted">{{ block.subtitle }}</p>
    {%- endif -%}
    <div class="prose">{{ block.content | renderContent: "md" }}</div>
    {%- if block.button -%}
      {%- assign variant = block.button.variant | default: "secondary" -%}
      <a href="{{ block.button.href }}" class="btn btn--{{ variant }}">{{ block.button.text }}</a>
    {%- endif -%}
  </article>
  <figure data-reveal="{{ reveal_figure }}">
    {%- case block.figure_type -%}
      {%- when "image" -%}
        {% image block.figure_src, block.figure_alt %}
        {%- if block.figure_caption -%}
          <figcaption>{{ block.figure_caption }}</figcaption>
        {%- endif -%}
      {%- when "video" -%}
        {%- include "design-system/video-iframe.html", video_id: block.figure_video_id, title: block.figure_alt -%}
        {%- if block.figure_caption -%}
          <figcaption>{{ block.figure_caption }}</figcaption>
        {%- endif -%}
      {%- when "code" -%}
        {%- include "design-system/code-block.html", filename: block.figure_filename, code: block.figure_code, language: block.figure_language -%}
      {%- when "html" -%}
        {{ block.figure_html }}
    {%- endcase -%}
  </figure>
</div>
